# TDDå¼€å‘å·¥ä½œæµæŒ‡å—

## ğŸ¯ ä¸“æ³¨åŠŸèƒ½å¼€å‘çš„TDDç¯å¢ƒ

### ç¯å¢ƒå‡†å¤‡ï¼ˆä¸€æ¬¡æ€§è®¾ç½®ï¼‰

```bash
# 1. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
cd backend
.venv\Scripts\activate  # Windows
# source .venv/bin/activate  # Linux/Mac

# 2. å®‰è£…ä¾èµ–ï¼ˆä»…åœ¨ä¾èµ–å˜æ›´æ—¶ï¼‰
pip install -r requirements.txt

# 3. æ•°æ®åº“è¿ç§»ï¼ˆä»…åœ¨æ¨¡å‹å˜æ›´æ—¶ï¼‰
python manage.py migrate
```

### ğŸ”„ TDDå¼€å‘å¾ªç¯

#### 1. å¿«é€Ÿå¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
# ä½¿ç”¨ç®€åŒ–çš„å¯åŠ¨è„šæœ¬
scripts\dev\quick-start.bat

# æˆ–è€…æ‰‹åŠ¨å¯åŠ¨ï¼ˆæ¨èç”¨äºå¼€å‘ï¼‰
cd backend
python manage.py runserver
```

#### 2. TDDå¾ªç¯ï¼šçº¢-ç»¿-é‡æ„

```bash
# æ­¥éª¤1ï¼šå†™å¤±è´¥çš„æµ‹è¯•ï¼ˆçº¢ï¼‰
# åœ¨ backend/tests/{module}/ ä¸‹åˆ›å»ºæµ‹è¯•

# æ­¥éª¤2ï¼šè¿è¡Œæµ‹è¯•ï¼Œç¡®è®¤å¤±è´¥
python run_tests.py --modules {module}

# æ­¥éª¤3ï¼šå†™æœ€å°‘ä»£ç è®©æµ‹è¯•é€šè¿‡ï¼ˆç»¿ï¼‰
# ç¼–å†™å®ç°ä»£ç 

# æ­¥éª¤4ï¼šè¿è¡Œæµ‹è¯•ï¼Œç¡®è®¤é€šè¿‡
python run_tests.py --modules {module}

# æ­¥éª¤5ï¼šé‡æ„ä»£ç 
# ä¿æŒæµ‹è¯•é€šè¿‡çš„å‰æä¸‹é‡æ„

# æ­¥éª¤6ï¼šé‡å¤å¾ªç¯
```

### ğŸ“ ç®€åŒ–çš„é¡¹ç›®ç»“æ„

```
backend/
â”œâ”€â”€ manage.py                 # Djangoç®¡ç†è„šæœ¬
â”œâ”€â”€ requirements.txt          # ä¾èµ–ç®¡ç†
â”œâ”€â”€ run_tests.py             # ç»Ÿä¸€æµ‹è¯•ç®¡ç†å™¨
â”œâ”€â”€ .env.example             # ç¯å¢ƒé…ç½®ç¤ºä¾‹
â”œâ”€â”€ test_platform/           # Djangoè®¾ç½®
â”œâ”€â”€ {app_name}/              # å„åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ models.py            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ views.py             # è§†å›¾é€»è¾‘  
â”‚   â”œâ”€â”€ serializers.py       # APIåºåˆ—åŒ–
â”‚   â””â”€â”€ urls.py              # URLè·¯ç”±
â””â”€â”€ tests/                   # é›†ä¸­å¼æµ‹è¯•ç›®å½•
    â”œâ”€â”€ conftest.py          # pytesté…ç½®
    â”œâ”€â”€ utils/               # æµ‹è¯•å·¥å…·
    â””â”€â”€ {app_name}/          # å„æ¨¡å—æµ‹è¯•
        â”œâ”€â”€ test_models.py   # æ¨¡å‹æµ‹è¯•
        â”œâ”€â”€ test_views.py    # è§†å›¾æµ‹è¯•
        â””â”€â”€ test_services.py # æœåŠ¡æµ‹è¯•
```

### ğŸš€ æ¨èçš„å¼€å‘å‘½ä»¤

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python run_tests.py

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
python run_tests.py --modules api_test

# è¿è¡Œå•å…ƒæµ‹è¯•
python run_tests.py --type unit

# å¿«é€Ÿæ£€æŸ¥ï¼ˆé™é»˜æ¨¡å¼ï¼‰
python run_tests.py --verbosity 0

# åˆ—å‡ºæ‰€æœ‰æµ‹è¯•
python run_tests.py --list
```

### ğŸ’¡ TDDæœ€ä½³å®è·µ

1. **æµ‹è¯•å…ˆè¡Œ**ï¼šå…ˆå†™æµ‹è¯•ï¼Œå†å†™å®ç°
2. **å°æ­¥è¿­ä»£**ï¼šæ¯æ¬¡åªå®ç°ä¸€ä¸ªå°åŠŸèƒ½
3. **é¢‘ç¹è¿è¡Œæµ‹è¯•**ï¼šæ¯æ¬¡ä»£ç å˜æ›´åç«‹å³è¿è¡Œç›¸å…³æµ‹è¯•
4. **ä¿æŒæµ‹è¯•ç®€å•**ï¼šä¸€ä¸ªæµ‹è¯•åªéªŒè¯ä¸€ä¸ªè¡Œä¸º
5. **é‡æ„æ—¶ä¿æŒæµ‹è¯•é€šè¿‡**ï¼šé‡æ„ä»£ç ä½†ä¸æ”¹å˜è¡Œä¸º

### ğŸ”§ å¼€å‘å·¥å…·é…ç½®

#### VS Code é…ç½®ï¼ˆæ¨èï¼‰
```json
// .vscode/settings.json
{
    "python.defaultInterpreterPath": "./backend/.venv/Scripts/python.exe",
    "python.testing.pytestEnabled": true,
    "python.testing.pytestArgs": ["backend/tests"],
    "files.exclude": {
        "**/__pycache__": true,
        "**/*.pyc": true
    }
}
```

#### PyCharm é…ç½®
1. è®¾ç½®é¡¹ç›®è§£é‡Šå™¨ä¸º `backend/.venv/Scripts/python.exe`
2. è®¾ç½®æµ‹è¯•æ ¹ç›®å½•ä¸º `backend/tests`
3. é…ç½®è¿è¡Œé…ç½®ä½¿ç”¨ Django æµ‹è¯•è¿è¡Œå™¨

### ğŸ“ æäº¤è§„èŒƒ

```bash
# åŠŸèƒ½å¼€å‘æäº¤æ ¼å¼
git commit -m "feat: æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½

- å®ç°ç”¨æˆ·è®¤è¯API
- æ·»åŠ ç™»å½•è¡¨å•éªŒè¯
- æ›´æ–°ç›¸å…³æµ‹è¯•ç”¨ä¾‹

Tests: python run_tests.py --modules user_management"

# æµ‹è¯•æ·»åŠ æäº¤æ ¼å¼  
git commit -m "test: æ·»åŠ ç”¨æˆ·ç™»å½•æµ‹è¯•ç”¨ä¾‹

- æµ‹è¯•æœ‰æ•ˆç™»å½•åœºæ™¯
- æµ‹è¯•æ— æ•ˆå‡­æ®å¤„ç†
- æµ‹è¯•ä¼šè¯ç®¡ç†"
```

### ğŸ¯ ä¸“æ³¨åŸåˆ™

1. **é¿å…è¿‡åº¦é…ç½®**ï¼šä½¿ç”¨é»˜è®¤è®¾ç½®ï¼Œé™¤éæœ‰æ˜ç¡®éœ€æ±‚
2. **ä¿æŒç®€å•**ï¼šä¼˜å…ˆä½¿ç”¨ç®€å•è§£å†³æ–¹æ¡ˆ
3. **æµ‹è¯•é©±åŠ¨**ï¼šè®©æµ‹è¯•æŒ‡å¯¼è®¾è®¡å’Œå®ç°
4. **å¿«é€Ÿåé¦ˆ**ï¼šä¿æŒæµ‹è¯•è¿è¡Œé€Ÿåº¦å¿«
5. **åŠŸèƒ½å®Œæ•´**ï¼šæ¯ä¸ªåŠŸèƒ½éƒ½è¦æœ‰å¯¹åº”çš„æµ‹è¯•è¦†ç›–